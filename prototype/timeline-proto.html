<!DOCTYPE html>
<html>
<head><title>Timeline Prototype</title></head>
<body>
  <pg-timeline-viewer width="1000" height="400">
    <pg-timeline>
      <pg-event x="20" label="Foo" />
      <pg-event start-x="25" end-x="30" label="Bar" />
    </pg-timeline>
  </pg-timeline-viewer>
</body>
<script>
var polygraph = (function() {
  'use strict';
  
  const polygraphPrefix = 'pg-';

  class AbstractMethodError {}
    
  class Axis {
    toPixel(val, minVal, maxVal, maxPixel) {
      throw new AbstractMethodError('toPixel');
    }
  }
  
  class RawAxis extends Axis {
    toPixel(val, minVal, maxVal, maxPixel) {
      return val;
    }
  }
  
  const svgNamespace = 'http://www.w3.org/2000/svg';
  class Svg {
    constructor(optSvg) {
      this._svg = optSvg || document.createElementNS(svgNamespace, 'svg');
    }
    
    get element() {
      return this._svg;
    }
    
    get width() {
      return this._svg.getAttributeNS(null, 'width');
    }
    
    set width(width) {
      this._svg.setAttributeNS(null, 'width', width);
    }
    
    get height() {
      return this._svg.getAttributeNS(null, 'height');
    }
    
    set height(height) {
      this._svg.setAttributeNS(null, 'height', height);
    }
  }

  class TimelineViewer extends HTMLElement {
    constructor() {
      super();
      
      const shadowRoot = this.attachShadow({mode: 'open'});
      
      this._svg = new Svg();
      shadowRoot.appendChild(this._svg.element);
    }
    
    connectedCallback() {
      if ( this.hasAttribute('width') ) {
        this.width = this.getAttribute('width');
      }
      if ( this.hasAttribute('height') ) {
        this.height = this.getAttribute('height'); 
      }
    }
    
    set width(width) {
      this._svg.width = width;
    }
    
    get width() {
      return this._svg.width;
    }
    
    set height(height) {
      this._svg.height = height;
    }
    
    get height() {
      return this._svg.height;
    }
  }
  /*
  class Timeline extends HtmlComponent {
  
  }
  window.customElements.define('polygraph-timeline', Timeline);
  */
  
  var axisDefs = {};
  
  var polygraph = {
    Axis: Axis,
    
    defineAxis : function(name, axis) {
      axisDefs[name] = axis;
    },
    
    init: function(optPrefix) {
      let prefix = optPrefix || 'pg';
      
      window.customElements.define(prefix + '-timeline-viewer', TimelineViewer);
    }
  };
  return polygraph;
})();

polygraph.init();
</script>
</html>