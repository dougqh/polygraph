<!DOCTYPE html>
<html>
<head><title>Timeline Prototype</title></head>
<body>
  <polygraph-timeline-viewer width="1000" height="400">
    <polygraph-timeline />
  </polygraph-timeline-viewer>
</body>
<script>
(function() {
  const svgutils = {
    debug: false,
    
    createElement: function(tag) {
      return document.createElementNS('http://www.w3.org/2000/svg', tag);
    },
    
    setAttribute: function(el, name, val) {
      svgutils.log('svg set', el, name, val);
      el.setAttributeNS('http://www.w3.org/2000/svg', name, val);
    },
    
    getAttribute: function(el, name) {
      svgutils.log('svg get', el, name);
      return el.getAttributeNS('http://www.w3.org/2000/svg', name);
    }
  };
  
  if ( svgutils.debug ) {
    svgutils.log = console.log;
  } else {
    svgutils.log = function() {};
  }

  class TimelineViewer extends HTMLElement {
    constructor() {
      super();
      
      const shadowRoot = this.attachShadow({mode: 'open'});
      this._svg = svgutils.createElement('svg');
      
      shadowRoot.appendChild(this._svg);
    }
    
    connectedCallback() {
      if ( this.hasAttribute('width') ) {
        this.width = this.getAttribute('width');
      }
      if ( this.hasAttribute('height') ) {
        this.height = this.getAttribute('height'); 
      }
    }
    
    set width(val) {
      svgutils.setAttribute(this._svg, 'width', val);
    }
    
    get width() {
      return svgutils.getAttribute(this._svg, 'width');
    }
    
    set height(val) {
      return svgutils.setAttribute(this._svg, 'height', val);
    }
    
    get height() {
      return svgutils.getAttribute(this._svg, 'height');
    }
  }
  window.customElements.define('polygraph-timeline-viewer', TimelineViewer);
  
  /*
  class Timeline extends HtmlComponent {
  
  }
  window.customElements.define('polygraph-timeline', Timeline);
  */
})();
</script>
</html>